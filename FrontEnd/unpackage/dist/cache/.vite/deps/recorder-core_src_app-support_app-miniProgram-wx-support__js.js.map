{
  "version": 3,
  "sources": ["../../../../../node_modules/recorder-core/src/app-support/app-miniProgram-wx-support.js"],
  "sourcesContent": ["/*\r\n录音 RecordApp: 微信小程序支持文件，支持在微信小程序环境中使用\r\nhttps://github.com/xiangyuecn/Recorder\r\n\r\n录音功能由微信小程序的RecorderManager录音接口提供（已屏蔽10分钟录音限制），因为js层已加载Recorder和相应的js编码引擎，所以，Recorder支持的录音格式，小程序内均可以做到支持。\r\n*/\r\n(function(factory){\r\n\tvar browser=typeof window==\"object\" && !!window.document;\r\n\tvar win=browser?window:Object; //非浏览器环境，Recorder挂载在Object下面\r\n\tvar rec=win.Recorder,ni=rec.i18n;\r\n\tfactory(rec,ni,ni.$T,browser);\r\n}(function(Recorder,i18n,$T,isBrowser){\r\n\"use strict\";\r\n\r\nvar IsWx=typeof wx==\"object\" && !!wx.getRecorderManager;\r\nvar App=Recorder.RecordApp;\r\nvar CLog=App.CLog;\r\n\r\nvar platform={\r\n\tSupport:function(call){\r\n\t\tif(IsWx && isBrowser){ //有的h5里面有wx对象，又有的wx里面有window对象\r\n\t\t\tvar win=window,doc=win.document,loc=win.location,body=doc.body;\r\n\t\t\tif(loc && loc.href && loc.reload && body && body.appendChild){\r\n\t\t\t\tCLog(\"识别是浏览器但又检测到wx\",3);\r\n\t\t\t\tcall(false); return; //多判断一些稳妥一点\r\n\t\t\t}\r\n\t\t}\r\n\t\tcall(IsWx);\r\n\t}\r\n\t,CanProcess:function(){\r\n\t\treturn true;//支持实时回调\r\n\t}\r\n};\r\nApp.RegisterPlatform(\"miniProgram-wx\",platform);\r\n\r\n\r\n\r\n//当使用到录音的页面onShow时进行一次调用，用于恢复被暂停的录音（比如按了home键会暂停录音）\r\nApp.MiniProgramWx_onShow=function(){\r\n\trecOnShow();\r\n};\r\n\r\n\r\n\r\n/*******实现统一接口*******/\r\nplatform.RequestPermission=function(sid,success,fail){\r\n\trequestPermission(success,fail);\r\n};\r\nplatform.Start=function(sid,set,success,fail){\r\n\tonRecFn.param=set;\r\n\tvar rec=Recorder(set);\r\n\trec.set.disableEnvInFix=true; //不要音频输入丢失补偿\r\n\trec.dataType=\"arraybuffer\";\r\n\t\r\n\tonRecFn.rec=rec;//等待第一个数据到来再调用rec.start\r\n\tApp.__Rec=rec;//App需要暴露出使用到的rec实例\r\n\t\r\n\trecStart(success,fail);\r\n};\r\nplatform.Stop=function(sid,success,fail){\r\n\tclearCurMg();\r\n\t\r\n\tvar failCall=function(msg){\r\n\t\tif(App.__Sync(sid)){\r\n\t\t\tonRecFn.rec=null;\r\n\t\t}\r\n\t\tfail(msg);\r\n\t};\r\n\tvar rec=onRecFn.rec;\r\n\tonRecFn.rec=null;\r\n\t\r\n\tvar clearMsg=success?\"\":App.__StopOnlyClearMsg();\r\n\tif(!rec){\r\n\t\tfailCall(\"未开始录音\"+(clearMsg?\" (\"+clearMsg+\")\":\"\"));\r\n\t\treturn;\r\n\t};\r\n\t\r\n\tCLog(\"rec encode: pcm:\"+rec.recSize+\" srcSR:\"+rec.srcSampleRate+\" set:\"+JSON.stringify(onRecFn.param));\r\n\t\r\n\tvar end=function(){\r\n\t\tif(App.__Sync(sid)){\r\n\t\t\t//把可能变更的配置写回去\r\n\t\t\tfor(var k in rec.set){\r\n\t\t\t\tonRecFn.param[k]=rec.set[k];\r\n\t\t\t};\r\n\t\t};\r\n\t};\r\n\tif(!success){\r\n\t\tend();\r\n\t\tfailCall(clearMsg);\r\n\t\treturn;\r\n\t};\r\n\trec.stop(function(arrBuf,duration,mime){\r\n\t\tend();\r\n\t\tsuccess(arrBuf,duration,mime);\r\n\t},function(msg){\r\n\t\tend();\r\n\t\tfailCall(msg);\r\n\t});\r\n};\r\n\r\n\r\n\r\n\r\nvar onRecFn=function(pcm,sampleRate){\r\n\tvar rec=onRecFn.rec;\r\n\tif(!rec){\r\n\t\tCLog(\"未开始录音，但收到wx PCM数据\",3);\r\n\t\treturn;\r\n\t};\r\n\tif(!rec._appStart){\r\n\t\trec.envStart({\r\n\t\t\tenvName:platform.Key,canProcess:platform.CanProcess()\r\n\t\t},sampleRate);\r\n\t};\r\n\trec._appStart=1;\r\n\t\r\n\tvar sum=0;\r\n\tfor(var i=0;i<pcm.length;i++){\r\n\t\tsum+=Math.abs(pcm[i]);\r\n\t}\r\n\t\r\n\trec.envIn(pcm,sum);\r\n};\r\n\r\n\r\n\r\n/*******微信小程序录音接口调用*******/\r\nvar hasPermission=false;\r\nvar requestPermission=function(success,fail){\r\n\tclearCurMg();\r\n\tinitSys();\r\n\tif(hasPermission){\r\n\t\tsuccess(); return;\r\n\t}\r\n\tvar mg=wx.getRecorderManager(),next=1;\r\n\tmg.onStart(function(){\r\n\t\thasPermission=true;\r\n\t\tif(next){ next=0;\r\n\t\t\tstopMg(mg);\r\n\t\t\tsuccess();\r\n\t\t}\r\n\t});\r\n\tmg.onError(function(res){\r\n\t\tvar msg=\"请求录音权限出现错误：\"+res.errMsg;\r\n\t\tCLog(msg+\"。\"+UserPermissionMsg,1,res);\r\n\t\tif(next){ next=0;\r\n\t\t\tstopMg(mg);\r\n\t\t\tfail(msg,true);\r\n\t\t}\r\n\t});\r\n\tnewStart(\"req\",mg);\r\n};\r\nvar UserPermissionMsg=\"请自行检查wx.getSetting中的scope.record录音权限，如果用户拒绝了权限，请引导用户到小程序设置中授予录音权限。\";\r\n\r\nvar curMg,mgStime=0;\r\nvar clearCurMg=function(){\r\n\tvar old=curMg;curMg=null;\r\n\tif(old){ stopMg(old) }\r\n};\r\nvar stopMg=function(mg){\r\n\tmgStime=Date.now();\r\n\tmg.stop();\r\n};\r\nvar newStart=function(tag,mg){ //统一参数进行start调用，不然开发工具上热更新参数不一样直接卡死\r\n\tvar obj={\r\n\t\tduration:600000\r\n\t\t,sampleRate:48000 //pc端无效\r\n\t\t,encodeBitRate:320000\r\n\t\t,numberOfChannels:1\r\n\t\t,format:\"PCM\"\r\n\t\t,frameSize:isDev?1:4 //4=48/12\r\n\t};\r\n\tvar set=onRecFn.param||{},aec=(set.audioTrackSet||{}).echoCancellation;\r\n\tif(sys.platform==\"android\"){ //Android指定麦克风源 MediaRecorder.AudioSource，0 DEFAULT 默认音频源，1 MIC 主麦克风，5 CAMCORDER 相机方向的麦，6 VOICE_RECOGNITION 语音识别，7 VOICE_COMMUNICATION 语音通信(带回声消除)\r\n\t\tvar source=set.android_audioSource,asVal=\"\";\r\n\t\tif(source==null && aec) source=7;\r\n\t\tif(source==null) source=App.Default_Android_AudioSource;\r\n\t\tif(source==1) asVal=\"mic\";\r\n\t\tif(source==5) asVal=\"camcorder\";\r\n\t\tif(source==6) asVal=\"voice_recognition\";\r\n\t\tif(source==7) asVal=\"voice_communication\";\r\n\t\tif(asVal)obj.audioSource=asVal;\r\n\t};\r\n\tif(aec){\r\n\t\tCLog(\"mg注意：iOS下无法配置回声消除，Android无此问题，建议都启用听筒播放避免回声：wx.setInnerAudioOption({speakerOn:false})\",3);\r\n\t};\r\n\tCLog(\"[\"+tag+\"]mg.start obj\",obj);\r\n\tmg.start(obj);\r\n};\r\nvar recOnShow=function(){\r\n\tif(curMg && curMg.__pause){\r\n\t\tCLog(\"mg onShow 录音开始恢复...\",3);\r\n\t\tcurMg.resume();\r\n\t}\r\n};\r\nvar recStart=function(success,fail){\r\n\tclearCurMg();\r\n\tinitSys();\r\n\tdevWebMInfo={};\r\n\tif(isDev){\r\n\t\tCLog(\"RecorderManager.onFrameRecorded 在开发工具中测试返回的是webm格式音频，将会尝试进行解码。开发工具中录音偶尔会非常卡，建议使用真机测试（各种奇奇怪怪的毛病就都正常了）\",3);\r\n\t}\r\n\t\r\n\tvar startIsEnd=false,startCount=1;\r\n\tvar startEnd=function(err){\r\n\t\tif(startIsEnd)return; startIsEnd=true;\r\n\t\tif(err){\r\n\t\t\tclearCurMg();\r\n\t\t\tfail(err);\r\n\t\t}else{\r\n\t\t\tsuccess();\r\n\t\t};\r\n\t};\r\n\t\r\n\tvar mg=curMg=wx.getRecorderManager();\r\n\tmg.onInterruptionEnd(function(){\r\n\t\tif(mg!=curMg)return;\r\n\t\tCLog(\"mg onInterruptionEnd 录音开始恢复...\",3);\r\n\t\tmg.resume();\r\n\t});\r\n\tmg.onPause(function(){\r\n\t\tif(mg!=curMg)return;\r\n\t\tmg.__pause=Date.now();\r\n\t\tCLog(\"mg onPause 录音被打断\",3);\r\n\t});\r\n\tmg.onResume(function(){\r\n\t\tif(mg!=curMg)return;\r\n\t\tvar t=mg.__pause?Date.now()-mg.__pause:0,t2=0;\r\n\t\tmg.__pause=0;\r\n\t\tif(t>300){//填充最多1秒的静默\r\n\t\t\tt2=Math.min(1000,t);\r\n\t\t\tonRecFn(new Int16Array(48000/1000*t2),48000);\r\n\t\t}\r\n\t\tCLog(\"mg onResume 恢复录音，填充了\"+t2+\"ms静默\",3);\r\n\t});\r\n\tmg.onError(function(res){\r\n\t\tif(mg!=curMg)return;\r\n\t\tvar msg=res.errMsg,tag=\"mg onError 开始录音出错：\";\r\n\t\tif(!startIsEnd && !mg._srt && /fail.+is.+recording/i.test(msg)){\r\n\t\t\tvar st=600-(Date.now()-mgStime); //距离上次停止未超过600毫秒，重试\r\n\t\t\tif(st>0){ st=Math.max(100,st);\r\n\t\t\t\tCLog(tag+\"等待\"+st+\"ms重试\",3,res);\r\n\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\tif(mg!=curMg)return; mg._srt=1;\r\n\t\t\t\t\tCLog(tag+\"正在重试\",3);\r\n\t\t\t\t\tnewStart(\"retry start\",mg);\r\n\t\t\t\t}, st);\r\n\t\t\t\treturn;\r\n\t\t\t};\r\n\t\t};\r\n\t\tCLog(startCount>1?tag+\"可能无法继续录音[\"+startCount+\"]。\"+msg\r\n\t\t\t:tag+msg+\"。\"+UserPermissionMsg,1,res);\r\n\t\tstartEnd(\"开始录音出错：\"+msg);\r\n\t});\r\n\tmg.onStart(function(){\r\n\t\tif(mg!=curMg)return;\r\n\t\tCLog(\"mg onStart 已开始录音\");\r\n\t\tmg._srt=0; //下次开始失败可以重试\r\n\t\tmg._st=Date.now();\r\n\t\tstartEnd();\r\n\t});\r\n\tmg.onStop(function(res){\r\n\t\tCLog(\"mg onStop 请勿尝试使用此原始结果中的文件路径（此原始文件的格式、采样率等和录音配置不相同）；如需本地文件：可在RecordApp.Stop回调中将得到的ArrayBuffer（二进制音频数据）用RecordApp.MiniProgramWx_WriteLocalFile接口保存到本地，即可得到有效路径。res:\",res);\r\n\t\tif(mg!=curMg)return;\r\n\t\tif(!mg._st || Date.now()-mg._st<600){ CLog(\"mg onStop但已忽略\",3); return }\r\n\t\tCLog(\"mg onStop 已停止录音，正在重新开始录音...\");\r\n\t\tstartCount++;\r\n\t\tmg._st=0;\r\n\t\tnewStart(\"restart\",mg);\r\n\t});\r\n\t\r\n\tvar start0=function(){\r\n\t\tmg.onFrameRecorded(function(res){\r\n\t\t\tif(mg!=curMg)return;\r\n\t\t\tif(!startIsEnd)CLog(\"mg onStart未触发，但收到了onFrameRecorded\",3);\r\n\t\t\tstartEnd();\r\n\t\t\t\r\n\t\t\tvar aBuf=res.frameBuffer;\r\n\t\t\tif(!aBuf || !aBuf.byteLength){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(isDev){\r\n\t\t\t\tdevWebmDecode(new Uint8Array(aBuf));\r\n\t\t\t}else{\r\n\t\t\t\tonRecFn(new Int16Array(aBuf),48000);\r\n\t\t\t};\r\n\t\t});\r\n\t\tnewStart(\"start\",mg);\r\n\t};\r\n\t\r\n\tvar st=600-(Date.now()-mgStime); //距离上次停止未超过600毫秒，等待一会，一般是第一次请求权限后立马开始录音造成的（录音参数不一样，不共享同一个mg）\r\n\tif(st>0){ st=Math.max(100,st);\r\n\t\tCLog(\"mg.start距stop太近需等待\"+st+\"ms\",3);\r\n\t\tsetTimeout(function(){ if(mg!=curMg)return; start0(); }, st);\r\n\t}else{\r\n\t\tstart0();\r\n\t};\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n//保存文件到本地，提供文件名或set和arrayBuffer，True(savePath)，False(errMsg)\r\nApp.MiniProgramWx_WriteLocalFile=function(fileName,buffer,True,False){\r\n\tvar set=fileName; if(typeof(set)==\"string\") set={fileName:fileName};\r\n\tfileName=set.fileName;\r\n\tvar append=set.append; //追加写入到文件结尾\r\n\tvar seek_=set.seekOffset, seek=+seek_||0; //覆盖写入到指定位置\r\n\tif(!seek_ && seek_!==0) seek=-1;\r\n\t\r\n\tvar EnvUsr=wx.env.USER_DATA_PATH, savePath=fileName;\r\n\tif(fileName.indexOf(EnvUsr)==-1) savePath=EnvUsr+\"/\"+fileName;\r\n\t\r\n\t//如果上次还在写入，就等待，保证顺序写入\r\n\tvar tasks=writeTasks[savePath]=writeTasks[savePath]||[];\r\n\tvar tk0=tasks[0], tk={a:set,b:buffer,c:True,d:False};\r\n\tif(tk0 && tk0._r){ //还在写入，等待\r\n\t\tCLog(\"wx文件等待写入\"+savePath,3);\r\n\t\tset._tk=1; tasks.push(tk); return;\r\n\t}\r\n\tif(set._tk) CLog(\"wx文件继续写入\"+savePath);\r\n\ttasks.splice(0,0,tk); tk._r=1; //阻塞后续写入\r\n\t\r\n\tvar mg=wx.getFileSystemManager(), fd=0;\r\n\tvar endCall=function(){ //操作完成 清理环境，延迟一下等操作完全结束\r\n\t\tif(fd) mg.close({ fd:fd });\r\n\t\tsetTimeout(function(){\r\n\t\t\ttasks.shift(); var tk=tasks.shift();\r\n\t\t\tif(tk){ //继续写入等待的\r\n\t\t\t\tApp.MiniProgramWx_WriteLocalFile(tk.a,tk.b,tk.c,tk.d);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\tvar okCall=function(){ endCall(); True&&True(savePath) };\r\n\tvar failCall=function(e){ endCall();\r\n\t\tvar msg=e.errMsg||\"-\";\r\n\t\tCLog(\"wx文件\"+savePath+\"写入出错：\"+msg,1);\r\n\t\tFalse&&False(msg);\r\n\t};\r\n\t\r\n\tif(seek>-1 || append){\r\n\t\tmg.open({\r\n\t\t\tfilePath:savePath ,flag:seek>-1?\"r+\":\"a\"\r\n\t\t\t,success:function(res){\r\n\t\t\t\tfd=res.fd;\r\n\t\t\t\tvar opt={ fd:fd, data:buffer, success:okCall, fail:failCall };\r\n\t\t\t\tif(seek>-1) opt.position=seek;\r\n\t\t\t\tmg.write(opt);\r\n\t\t\t}\r\n\t\t\t,fail:failCall\r\n\t\t});\r\n\t}else{\r\n\t\tmg.writeFile({\r\n\t\t\tfilePath:savePath, encoding:\"binary\", data:buffer\r\n\t\t\t,success:okCall, fail:failCall\r\n\t\t});\r\n\t}\r\n};\r\nvar writeTasks={};\r\n//删除已保存到本地的文件，savePath必须是WriteLocalFile得到的路径 True() False(errMsg)\r\nApp.MiniProgramWx_DeleteLocalFile=function(savePath,True,False){\r\n\twx.getFileSystemManager().unlink({\r\n\t\tfilePath:savePath\r\n\t\t,success:function(){ True&&True() }\r\n\t\t,fail:function(e){ False&&False(e.errMsg||\"-\") }\r\n\t});\r\n};\r\n\r\n\r\n\r\n\r\n\r\nvar isDev,sys;\r\nvar initSys=function(){\r\n\tif(sys)return;\r\n\tsys=wx.getSystemInfoSync();\r\n\tisDev=sys.platform==\"devtools\"?1:0;\r\n\tif(isDev){\r\n\t\tdevWebCtx=wx.createWebAudioContext();\r\n\t}\r\n};\r\n\r\n\r\n/****开发工具内录音返回的webm数据解码成pcm，方便测试****/\r\nvar devWebCtx,devWebMInfo;\r\n//=======从WebM字节流中提取pcm数据=====\r\nvar devWebmDecode=function(inBytes){\r\n\tvar scope=devWebMInfo;\r\n\tif(!scope.pos){\r\n\t\tscope.pos=[0]; scope.tracks={}; scope.bytes=[];\r\n\t};\r\n\tvar tracks=scope.tracks, position=[scope.pos[0]];\r\n\tvar endPos=function(){ scope.pos[0]=position[0] };\r\n\t\r\n\tvar sBL=scope.bytes.length;\r\n\tvar bytes=new Uint8Array(sBL+inBytes.length);\r\n\tbytes.set(scope.bytes); bytes.set(inBytes,sBL);\r\n\tscope.bytes=bytes;\r\n\t\r\n\t//检测到不是webm，当做pcm直接返回\r\n\tvar returnPCM=function(){\r\n\t\tscope.bytes=[];\r\n\t\tonRecFn(new Int16Array(bytes),48000);\r\n\t};\r\n\tif(scope.isNotWebM){\r\n\t\treturnPCM(); return;\r\n\t};\r\n\t\r\n\t//先读取文件头和Track信息\r\n\tif(!scope._ht){\r\n\t\t//暴力搜索EBML Header，开头数据可能存在上次录音结尾数据\r\n\t\tvar headPos0=0;\r\n\t\tfor(var i=0;i<bytes.length;i++){\r\n\t\t\tif(bytes[i]==0x1A && bytes[i+1]==0x45 && bytes[i+2]==0xDF && bytes[i+3]==0xA3){\r\n\t\t\t\theadPos0=i;\r\n\t\t\t\tposition[0]=i+4; break;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(!position[0]){\r\n\t\t\tif(bytes.length>5*1024){\r\n\t\t\t\tCLog(\"未识别到WebM数据，开发工具可能已支持PCM\",3);\r\n\t\t\t\tscope.isNotWebM=true;\r\n\t\t\t\treturnPCM();\r\n\t\t\t};\r\n\t\t\treturn;//未识别到EBML Header\r\n\t\t}\r\n\t\treadMatroskaBlock(bytes, position);//跳过EBML Header内容\r\n\t\tif(!BytesEq(readMatroskaVInt(bytes, position), [0x18,0x53,0x80,0x67])){\r\n\t\t\treturn;//未识别到Segment\r\n\t\t}\r\n\t\treadMatroskaVInt(bytes, position);//跳过Segment长度值\r\n\t\twhile(position[0]<bytes.length){\r\n\t\t\tvar eid0=readMatroskaVInt(bytes, position);\r\n\t\t\tvar bytes0=readMatroskaBlock(bytes, position);\r\n\t\t\tvar pos0=[0],audioIdx=0;\r\n\t\t\tif(!bytes0)return;//数据不全，等待缓冲\r\n\t\t\t//Track完整数据，循环读取TrackEntry\r\n\t\t\tif(BytesEq(eid0, [0x16,0x54,0xAE,0x6B])){\r\n\t\t\t\tscope._ht=bytes.slice(headPos0,position[0]);\r\n\t\t\t\tCLog(\"WebM Tracks\",tracks);\r\n\t\t\t\tendPos();\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t//循环读取Cluster内的SimpleBlock\r\n\tvar datas=[],dataLen=0;\r\n\twhile(position[0]<bytes.length){\r\n\t\tvar p0=position[0];\r\n\t\tvar eid1=readMatroskaVInt(bytes, position);\r\n\t\tvar p1=position[0];\r\n\t\tvar bytes1=readMatroskaBlock(bytes, position);\r\n\t\tif(!bytes1)break;//数据不全，等待缓冲\r\n\t\tif(BytesEq(eid1, [0xA3])){//SimpleBlock完整数据\r\n\t\t\tvar arr=bytes.slice(p0,position[0]);\r\n\t\t\tdataLen+=arr.length;\r\n\t\t\tdatas.push(arr);\r\n\t\t}\r\n\t\tendPos();\r\n\t}\r\n\t\r\n\tif(!dataLen){\r\n\t\treturn;\r\n\t}\r\n\tvar more=new Uint8Array(bytes.length-scope.pos[0]);\r\n\tmore.set(bytes.subarray(scope.pos[0]));\r\n\tscope.bytes=more; //清理已读取了的缓冲数据\r\n\tscope.pos[0]=0;\r\n\t\r\n\t//和头一起拼接成新的webm\r\n\tvar add=[0x1F,0x43,0xB6,0x75,0x01,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF];//Cluster\r\n\tadd.push(0xE7,0x81,0x00);\r\n\tdataLen+=add.length;\r\n\tdatas.splice(0,0,add);\r\n\t\r\n\tdataLen+=scope._ht.length;\r\n\tdatas.splice(0,0,scope._ht);\r\n\t\r\n\tvar u8arr=new Uint8Array(dataLen); //已获取的音频数据\r\n\tfor(var i=0,i2=0;i<datas.length;i++){\r\n\t\tu8arr.set(datas[i],i2);\r\n\t\ti2+=datas[i].length;\r\n\t}\r\n\t\r\n\tdevWebCtx.decodeAudioData(u8arr.buffer, function(raw){\r\n\t\tvar src=raw.getChannelData(0);\r\n\t\tvar pcm=new Int16Array(src.length);\r\n\t\tfor(var i=0;i<src.length;i++){\r\n\t\t\tvar s=Math.max(-1,Math.min(1,src[i]));\r\n\t\t\ts=s<0?s*0x8000:s*0x7FFF;\r\n\t\t\tpcm[i]=s;\r\n\t\t};\r\n\t\tonRecFn(pcm,raw.sampleRate);\r\n\t},function(){\r\n\t\tCLog(\"WebM解码失败\",1);\r\n\t});\r\n};\r\n//两个字节数组内容是否相同\r\nvar BytesEq=function(bytes1,bytes2){\r\n\tif(!bytes1 || bytes1.length!=bytes2.length) return false;\r\n\tif(bytes1.length==1) return bytes1[0]==bytes2[0];\r\n\tfor(var i=0;i<bytes1.length;i++){\r\n\t\tif(bytes1[i]!=bytes2[i]) return false;\r\n\t}\r\n\treturn true;\r\n};\r\n//字节数组BE转成int数字\r\nvar BytesInt=function(bytes){\r\n\tvar s=\"\";//0-8字节，js位运算只支持4字节\r\n\tfor(var i=0;i<bytes.length;i++){var n=bytes[i];s+=(n<16?\"0\":\"\")+n.toString(16)};\r\n\treturn parseInt(s,16)||0;\r\n};\r\n//读取一个可变长数值字节数组\r\nvar readMatroskaVInt=function(arr,pos,trim){\r\n\tvar i=pos[0];\r\n\tif(i>=arr.length)return;\r\n\tvar b0=arr[i],b2=(\"0000000\"+b0.toString(2)).substr(-8);\r\n\tvar m=/^(0*1)(\\d*)$/.exec(b2);\r\n\tif(!m)return;\r\n\tvar len=m[1].length, val=[];\r\n\tif(i+len>arr.length)return;\r\n\tfor(var i2=0;i2<len;i2++){ val[i2]=arr[i]; i++; }\r\n\tif(trim) val[0]=parseInt(m[2]||'0',2);\r\n\tpos[0]=i;\r\n\treturn val;\r\n};\r\n//读取一个自带长度的内容字节数组\r\nvar readMatroskaBlock=function(arr,pos){\r\n\tvar lenVal=readMatroskaVInt(arr,pos,1);\r\n\tif(!lenVal)return;\r\n\tvar len=BytesInt(lenVal);\r\n\tvar i=pos[0], val=[];\r\n\tif(len<0x7FFFFFFF){ //超大值代表没有长度\r\n\t\tif(i+len>arr.length)return;\r\n\t\tfor(var i2=0;i2<len;i2++){ val[i2]=arr[i]; i++; }\r\n\t}\r\n\tpos[0]=i;\r\n\treturn val;\r\n};\r\n//=====End WebM读取=====\r\n\r\n\r\n}));"],
  "mappings": "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",
  "names": ["st", "tk", "i"]
}
