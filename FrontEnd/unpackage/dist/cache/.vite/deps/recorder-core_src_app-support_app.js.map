{
  "version": 3,
  "sources": ["../../../../../node_modules/recorder-core/src/app-support/app.js"],
  "sourcesContent": ["/*\r\nRecordApp：基于Recorder的跨平台录音，支持在浏览器环境中使用（H5）、各种使用js来构建的程序中使用（App、小程序、UniApp、Electron、NodeJs）\r\nhttps://github.com/xiangyuecn/Recorder\r\n\r\n示例demo请参考根目录内的app-support-sample目录\r\n\r\n使用时需先引入recorder-core和需要的编码器，再引入本js，再根据不同平台引入相应的app-xxx-support.js支持文件；如果引入的支持文件需要进行额外的配置，可参考app-support-sample目录内对应的配置文件。\r\n\r\n可以仅使用RecordApp作为入口，可以不关心recorder-core中的方法，因为RecordApp已经对他进行了一次封装，并且屏蔽了非通用的功能。\r\n*/\r\n(function(factory){\r\n\tvar browser=typeof window==\"object\" && !!window.document;\r\n\tvar win=browser?window:Object; //非浏览器环境，Recorder挂载在Object下面\r\n\tvar rec=win.Recorder,ni=rec.i18n;\r\n\tfactory(win,rec,ni,ni.$T,browser);\r\n\t//umd returnExports.js\r\n\tif(typeof(define)=='function' && define.amd){\r\n\t\tdefine(function(){\r\n\t\t\treturn win.RecordApp;\r\n\t\t});\r\n\t};\r\n\tif(typeof(module)=='object' && module.exports){\r\n\t\tmodule.exports=win.RecordApp;\r\n\t};\r\n}(function(Export,Recorder,i18n,$T,isBrowser){\r\n\"use strict\";\r\n\r\nvar App={\r\nLM:\"2024-04-09 19:22\"\r\n\r\n//当前使用的平台实现\r\n,Current:0\r\n//已注册的平台实现\r\n,Platforms:{} \r\n};\r\nvar Platforms=App.Platforms;\r\nvar AppTxt=\"RecordApp\";\r\nvar ReqTxt=\"RequestPermission\";\r\nvar RegTxt=\"RegisterPlatform\";\r\n\r\nvar WApp2=Export[AppTxt];//重复加载js\r\nif(WApp2&&WApp2.LM==App.LM){\r\n\tWApp2.CLog($T(\"uXtA::重复导入{1}\",0,AppTxt),3);\r\n\treturn;\r\n};\r\nExport[AppTxt]=App;\r\nRecorder[AppTxt]=App;\r\n\r\n\r\nApp.__SID_=0;//同步操作，防止同时多次调用\r\nvar SID=App.__SID=function(){ return ++App.__SID_; };\r\nvar Sync=App.__Sync=function(sid,tag,err){\r\n\tif(App.__SID_!=sid){\r\n\t\tif(tag){\r\n\t\t\tCLog($T(\"kIBu::注意：因为并发调用了其他录音相关方法，当前 {1} 的调用结果已被丢弃且不会有回调\",0,tag)+(err?\", error: \"+err:\"\"),3);\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\treturn true;\r\n};\r\n\r\nvar CLog=function(){\r\n\tvar v=arguments; v[0]=\"[\"+(CLog.Tag||AppTxt)+\"][\"+(App.Current&&App.Current.Key||\"?\")+\"]\"+v[0];\r\n\tRecorder.CLog.apply(null,v);\r\n};\r\nApp.CLog=CLog;\r\n\r\n\r\n/**\r\n注册一个平台的实现，对应的都会有一个app-xxx-support.js支持文件(Default-H5除外)，config中提供统一的实现接口：\r\n{\r\n\tSupport: fn( call(canUse) ) 判断此平台是否支持或开启，如果平台可用需回调call(true)选择使用这个平台，并忽略其他平台\r\n\tCanProcess: fn() 此平台是否支持实时回调，返回true代表支持\r\n\t\r\n\tInstall: fn( success(),fail(errMsg) ) 可选，平台初始化安装，当使用此平台时会执行一次本方法（同一时间只会有一次调用，没有并发调用问题）\r\n\tPause: fn() 可选，暂停录音实现，如果返回false将执行默认暂停操作\r\n\tResume: fn() 可选，继续录音实现，如果返回false将执行默认继续操作\r\n\t\r\n下面的方法中sid用于同步操作，在异步回调中用App.__Sync判断此sid是否处于同步状态\r\n实现中使用到的Recorder实例需赋值给App.__Rec（Stop结束后会自动清理并赋值为null）\r\n\t\r\n\tRequestPermission:fn(sid,success,fail) 实现录音权限请求，通过回调函数返回结果\r\n\t\tsuccess:fn() 有权限时回调\r\n\t\tfail:fn(errMsg,isUserNotAllow) 没有权限或者不能录音时回调，如果是用户主动拒绝的录音权限，除了有错误消息外，isUserNotAllow=true，方便程序中做不同的提示，提升用户主动授权概率\r\n\t\r\n\tStart:fn(sid,set,success,fail) 实现开始录音\r\n\t\tset:{} 和Recorder的set大部分参数相同\r\n\t\tsuccess:fn() 打开录音时回调\r\n\t\tfail:fn(errMsg) 开启录音出错时回调\r\n\tStart_Check:fn(set) 可选，调用本实现的Start前执行环境检查，返回检查错误文本，如果返回false将执行默认检查操作\r\n\tAllStart_Clean:fn(set) 可选，任何实现的Start前执行本配置清理，set里面可能为了兼容不同平台环境会传入额外的参数，可以进行清理，无返回值\r\n\t\r\n\tStop:fn(sid,success,fail) 实现结束录音，返回结果，success参数=null时仅清理资源\r\n\t\tsuccess:fn(arrayBuffer,duration,mime)\t成功完成录音回调，参数可能为null\r\n\t\t\tarrayBuffer:ArrayBuffer 录音数据\r\n\t\t\tduration:123 //录音数据持续时间\r\n\t\t\tmime:\"audio/mp3\" 录音数据格式\r\n\t\tfail:fn(errMsg) 录音出错时回调\r\n}\r\n**/\r\nApp[RegTxt]=function(key,config){ //App.RegisterPlatform=function()\r\n\tconfig.Key=key;\r\n\tif(Platforms[key]){\r\n\t\tCLog($T(\"ha2K::重复注册{1}\",0,key),3);\r\n\t}\r\n\tPlatforms[key]=config;\r\n};\r\nApp.__StopOnlyClearMsg=function(){\r\n\treturn $T(\"wpTL::仅清理资源\");\r\n};\r\n\r\n/****实现默认的H5统一接口*****/\r\nvar KeyH5=\"Default-H5\",H5OpenSet=ReqTxt+\"_H5OpenSet\";\r\n(function(){\r\nvar impl={\r\n\tSupport:function(call){\r\n\t\t//默认的始终要支持\r\n\t\tcall(true);\r\n\t}\r\n\t,CanProcess:function(){\r\n\t\treturn true;//支持实时回调\r\n\t}\r\n};\r\nApp[RegTxt](KeyH5,impl);\r\n\r\nimpl[ReqTxt]=function(sid,success,fail){ //impl.RequestPermission=function()\r\n\tvar old=App.__Rec;\r\n\tif(old){\r\n\t\told.close();\r\n\t\tApp.__Rec=null;\r\n\t};\r\n\th5Kill();\r\n\t\r\n\t//h5会提前打开录音，open时需要的配置只能单独配置\r\n\tvar h5Set=App[H5OpenSet]; App[H5OpenSet]=null;\r\n\t\r\n\tvar rec=Recorder(h5Set||{});\r\n\trec.open(function(){\r\n\t\t//rec.close(); keep stream Stop时再关，免得Start再次请求权限\r\n\t\tsuccess();\r\n\t},fail);\r\n};\r\nvar h5Kill=function(){ //释放检测权限时已打开的录音\r\n\tif(Recorder.IsOpen()){\r\n\t\tCLog(\"kill open...\");\r\n\t\tvar rec=Recorder();\r\n\t\trec.open();\r\n\t\trec.close();\r\n\t};\r\n};\r\nimpl.Start=function(sid,set,success,fail){\r\n\tvar appRec=App.__Rec;\r\n\tif(appRec!=null){\r\n\t\tappRec.stop();//未stop的stop掉\r\n\t};\r\n\tApp.__Rec=appRec=Recorder(set);\r\n\tappRec.appSet=set;\r\n\tappRec.dataType=\"arraybuffer\";\r\n\tappRec.open(function(){\r\n\t\tif(Sync(sid)){\r\n\t\t\tappRec.start();\r\n\t\t};\r\n\t\tsuccess();\r\n\t},fail);\r\n};\r\nimpl.Stop=function(sid,success,fail){\r\n\tvar appRec=App.__Rec;\r\n\tvar clearMsg=success?\"\":App.__StopOnlyClearMsg();\r\n\tif(!appRec){\r\n\t\th5Kill(); //释放检测权限时已打开的录音\r\n\t\tfail($T(\"bpvP::未开始录音\")\r\n\t\t\t+(clearMsg?\" (\"+clearMsg+\")\":\"\"));\r\n\t\treturn;\r\n\t};\r\n\tvar end=function(){\r\n\t\tif(Sync(sid)){\r\n\t\t\tappRec.close();\r\n\t\t\t//把可能变更的配置写回去\r\n\t\t\tfor(var k in appRec.set){\r\n\t\t\t\tappRec.appSet[k]=appRec.set[k];\r\n\t\t\t};\r\n\t\t};\r\n\t};\r\n\t\r\n\tvar stopFail=function(msg){\r\n\t\tend();\r\n\t\tfail(msg);\r\n\t};\r\n\tif(!success){\r\n\t\tstopFail(clearMsg);\r\n\t\treturn;\r\n\t};\r\n\tappRec.stop(function(arrBuf,duration,mime){\r\n\t\tend();\r\n\t\tsuccess(arrBuf,duration,mime);\r\n\t},stopFail);\r\n};\r\n\r\n})();\r\n\r\n\r\n\r\n\r\n\r\n/***\r\n获取底层平台录音过程中会使用用来处理实时数据的Recorder对象实例rec，如果底层录音过程中不使用Recorder进行数据的实时处理（目前没有），将返回null。Start调用前和Stop调用后均会返回null。\r\n\r\nrec中的方法不一定都能使用，主要用来获取内部缓冲用的，比如实时清理缓冲。\r\n***/\r\nApp.GetCurrentRecOrNull=function(){\r\n\treturn App.__Rec||null;\r\n};\r\n\r\n/**暂停录音**/\r\nApp.Pause=function(){\r\n\tvar cur=App.Current,key=\"Pause\";\r\n\tif(cur&&cur[key]){\r\n\t\tif(cur[key]()!==false)return;\r\n\t}\r\n\tvar rec=App.__Rec;\r\n\tif(rec && canProc(key)){\r\n\t\trec.pause();\r\n\t}\r\n};\r\n/**恢复录音**/\r\nApp.Resume=function(){\r\n\tvar cur=App.Current,key=\"Resume\";\r\n\tif(cur&&cur[key]){\r\n\t\tif(cur[key]()!==false)return;\r\n\t}\r\n\tvar rec=App.__Rec;\r\n\tif(rec && canProc(key)){\r\n\t\trec.resume();\r\n\t}\r\n};\r\nvar canProc=function(tag){\r\n\tvar cur=App.Current;\r\n\tif(cur&&cur.CanProcess()) return 1;\r\n\tCLog($T(\"fLJD::当前环境不支持实时回调，无法进行{1}\",0,tag),3);\r\n};\r\n\r\n\r\n/***\r\n初始化安装，可反复调用\r\nsuccess: fn() 初始化成功\r\nfail: fn(msg) 初始化失败\r\n***/\r\nApp.Install=function(success,fail){\r\n\tvar cur=App.Current;\r\n\tif(cur){ success&&success(); return; }\r\n\t//因为此操作是异步的，为了避免竞争Current资源，此代码保证得到结果前只会发起一次调用\r\n\tvar reqs=App.__reqs||(App.__reqs=[]);\r\n\treqs.push({s:success,f:fail});\r\n\tsuccess=function(){ call(\"s\",arguments) };\r\n\tfail=function(){ call(\"f\",arguments) };\r\n\tvar call=function(fn,args){\r\n\t\tvar arr=[].concat(reqs); reqs.length=0;\r\n\t\tfor(var i=0;i<arr.length;i++){\r\n\t\t\tvar f=arr[i][fn];\r\n\t\t\tf&&f.apply(null,args);\r\n\t\t};\r\n\t};\r\n\tif(reqs.length>1) return;\r\n\t\r\n\tvar keys=[KeyH5],key;\r\n\tfor(var k in Platforms){\r\n\t\tif(k!=KeyH5)keys.push(k);\r\n\t}\r\n\tkeys.reverse();\r\n\tvar initCur=function(idx){\r\n\t\tkey=keys[idx];\r\n\t\tcur=Platforms[key];\r\n\t\tcur.Support(function(canUse){\r\n\t\t\tif(!canUse){\r\n\t\t\t\treturn initCur(idx+1);\r\n\t\t\t};\r\n\t\t\tif(cur.Install){\r\n\t\t\t\tcur.Install(initOk,fail);\r\n\t\t\t}else{\r\n\t\t\t\tinitOk();\r\n\t\t\t};\r\n\t\t});\r\n\t};\r\n\tvar initOk=function(){\r\n\t\tApp.Current=cur;\r\n\t\tCLog(\"Install platform: \"+key);\r\n\t\tsuccess();\r\n\t};\r\n\tinitCur(0);\r\n};\r\n\r\n\r\n/***\r\n请求录音权限，如果当前环境不支持录音或用户拒绝将调用错误回调，调用start前需先至少调用一次此方法；请求权限后如果不使用了，不管有没有调用Start，至少要调用一次Stop来清理可能持有的资源。\r\nsuccess:fn() 有权限时回调\r\nfail:fn(errMsg,isUserNotAllow) 没有权限或者不能录音时回调，如果是用户主动拒绝的录音权限，除了有错误消息外，isUserNotAllow=true，方便程序中做不同的提示，提升用户主动授权概率\r\n***/\r\nApp[ReqTxt]=function(success,fail){ //App.RequestPermission=function(success,fail){\r\n\tvar sid=SID(),tag=AppTxt+\".\"+ReqTxt;\r\n\tvar failCall=function(errMsg,isUserNotAllow){\r\n\t\tisUserNotAllow=!!isUserNotAllow;\r\n\t\tvar msg=errMsg+\", isUserNotAllow:\"+isUserNotAllow;\r\n\t\tif(!Sync(sid,tag,msg))return;\r\n\t\tCLog($T(\"YnzX::录音权限请求失败：\")+msg,1);\r\n\t\tfail&&fail(errMsg,isUserNotAllow);\r\n\t};\r\n\tCLog(ReqTxt+\"...\");\r\n\tApp.Install(function(){\r\n\t\tif(!Sync(sid,tag))return;\r\n\t\t\r\n\t\tvar checkMsg=CheckH5();\r\n\t\tif(checkMsg){ failCall(checkMsg); return; };\r\n\t\t\r\n\t\tApp.Current[ReqTxt](sid,function(){ //App.Current.RequestPermission()\r\n\t\t\tif(!Sync(sid,tag))return;\r\n\t\t\tCLog(ReqTxt+\" Success\");\r\n\t\t\tsuccess&&success();\r\n\t\t},failCall);\r\n\t},failCall);\r\n};\r\nvar NeedReqMsg=function(){\r\n\treturn $T(\"nwKR::需先调用{1}\",0,ReqTxt);\r\n};\r\nvar CheckH5=function(){\r\n\tvar msg=\"\";\r\n\tif(App.Current.Key==KeyH5 && !isBrowser){\r\n\t\tmsg=$T(\"citA::当前不是浏览器环境，需引入针对此平台的支持文件（{1}），或调用{2}自行实现接入\",0,\"src/app-support/app-xxx-support.js\",AppTxt+\".\"+RegTxt);\r\n\t};\r\n\treturn msg;\r\n};\r\n\r\n\r\n/***\r\n开始录音，需先调用RequestPermission获得录音权限\r\n\r\nset：设置默认值：{\r\n\ttype:\"mp3\"//最佳输出格式，如果底层实现能够支持就应当优先返回此格式\r\n\tsampleRate:16000//最佳采样率hz\r\n\tbitRate:16//最佳比特率kbps\r\n\tonProcess:NOOP //如果当前环境支持实时回调（RecordApp.Current.CanProcess()），接收到录音数据时的回调函数：fn(buffers,powerLevel,bufferDuration,bufferSampleRate)\r\n\ttakeoffEncodeChunk:NOOP //fn(chunkBytes) \r\n} 注意：此对象会被修改，因为平台实现时需要把实际使用的值存入此对象\r\nsuccess:fn() 打开录音时回调\r\nfail:fn(errMsg) 开启录音出错时回调\r\n***/\r\nApp.Start=function(set,success,fail){\r\n\tvar sid=SID(),tag=AppTxt+\".Start\";\r\n\tvar failCall=function(msg){\r\n\t\tif(!Sync(sid,tag,msg))return;\r\n\t\tCLog($T(\"ecp9::开始录音失败：\")+msg,1);\r\n\t\tfail&&fail(msg);\r\n\t};\r\n\tCLog(\"Start...\");\r\n\t\r\n\tvar cur=App.Current;\r\n\tif(!cur){\r\n\t\tfailCall(NeedReqMsg());\r\n\t\treturn;\r\n\t};\r\n\t\r\n\tset||(set={});\r\n\tvar obj={\r\n\t\ttype:\"mp3\"\r\n\t\t,sampleRate:16000\r\n\t\t,bitRate:16\r\n\t\t,onProcess:function(){}\r\n\t};\r\n\tfor(var k in obj){\r\n\t\tset[k]||(set[k]=obj[k]);\r\n\t};\r\n\t\r\n\t//对配置项进行清理，set里面可能为了兼容不同平台环境会传入额外的参数，可以进行清理\r\n\tfor(var k in Platforms){\r\n\t\tvar pf=Platforms[k];\r\n\t\tif(pf.AllStart_Clean){\r\n\t\t\tpf.AllStart_Clean(set);\r\n\t\t}\r\n\t};\r\n\t\r\n\t//先执行一下环境配置检查\r\n\tvar checkMsg=false;\r\n\tif(cur.Start_Check){\r\n\t\tcheckMsg=cur.Start_Check(set);\r\n\t};\r\n\tif(checkMsg===false){\r\n\t\tvar checkRec=Recorder(set);\r\n\t\tcheckMsg=checkRec.envCheck({envName:cur.Key,canProcess:cur.CanProcess()});\r\n\t\tif(!checkMsg) checkMsg=CheckH5();\r\n\t}\r\n\tif(checkMsg){\r\n\t\tfailCall($T(\"EKmS::不能录音：\")+checkMsg);\r\n\t\treturn;\r\n\t};\r\n\t//重置Stop时的rec\r\n\tApp._SRec=0;\r\n\t\r\n\tcur.Start(sid,set,function(){\r\n\t\tif(!Sync(sid,tag))return;\r\n\t\tCLog($T(\"k7Qo::已开始录音\"),set);\r\n\t\tApp._STime=Date.now();\r\n\t\tsuccess&&success();\r\n\t},failCall);\r\n};\r\n\r\n\r\n/***\r\n结束录音\r\n\r\nsuccess:fn(arrayBuffer,duration,mime)\t结束录音时回调\r\n\tarrayBuffer:ArrayBuffer 录音二进制数据\r\n\tduration:123 录音时长，单位毫秒\r\n\tmime:\"auido/mp3\" 录音格式类型\r\n\t\r\nfail:fn(errMsg) 录音出错时回调\r\n\r\n本方法可以用来清理持有的资源，如果不提供success参数=null时，将不会进行音频编码操作，只进行清理完可能持有的资源后走fail回调\r\n***/\r\nApp.Stop=function(success,fail){\r\n\tvar sid=SID(),tag=AppTxt+\".Stop\";\r\n\tvar failCall=function(msg){\r\n\t\tif(!Sync(sid,tag,msg))return;\r\n\t\tCLog($T(\"Douz::结束录音失败：\")+msg,success?1:0);\r\n\t\ttry{\r\n\t\t\tfail&&fail(msg);\r\n\t\t}finally{ clear() }\r\n\t};\r\n\tvar clear=function(){\r\n\t\tApp._SRec=App.__Rec;\r\n\t\tApp.__Rec=null;\r\n\t};\r\n\tCLog(\"Stop... \"+$T(\"wqSH::和Start时差：{1}ms\",0,App._STime?Date.now()-App._STime:-1)+\" Recorder.LM:\"+Recorder.LM+\" \"+AppTxt+\".LM:\"+App.LM);\r\n\tvar t1=Date.now();\r\n\r\n\tvar cur=App.Current;\r\n\tif(!cur){\r\n\t\tfailCall(NeedReqMsg());\r\n\t\treturn;\r\n\t};\r\n\t\r\n\tcur.Stop(sid, !success?null:function(arrayBuffer,duration,mime){\r\n\t\tif(!Sync(sid,tag))return;\r\n\t\tCLog($T(\"g3VX::结束录音 耗时{1}ms 音频时长{2}ms 文件大小{3}b {4}\",0,Date.now()-t1,duration,arrayBuffer.byteLength,mime));\r\n\t\ttry{\r\n\t\t\tsuccess(arrayBuffer,duration,mime);\r\n\t\t}finally{ clear() }\r\n\t},failCall);\r\n};\r\n\r\n\r\n}));"],
  "mappings": "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",
  "names": []
}
